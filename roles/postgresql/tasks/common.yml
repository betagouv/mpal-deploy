---

- name: Create the postgres group
  become: true
  group:
    name: postgres
    state: present

- name: Create the postgres user
  become: true
  user:
    name: postgres
    generate_ssh_key: true
    group: postgres

- name: Install PostgreSQL, libpq, psycopg2, PostgreSQL client
  become: true
  apt:
    name: "{{ item }}"
    state: present
  with_items:
    - postgresql-9.4
    - postgresql-client-9.4
    - postgresql-9.4-repmgr
    - repmgr
    - libpq-dev
    - python-psycopg2

- name: Create the MPAL group
  become: true
  group:
    name: mpal
    state: present

- name: Create the MPAL user
  become: true
  user:
    name: mpal
    group: mpal
    shell: /bin/bash
